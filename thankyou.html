<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Table Reserved | Coffee Home</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background: #faf7f2;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        text-align: center;
        color: #333;
        padding: 1rem;
      }
      .wrapper {
        max-width: 480px;
        width: 100%;
      }
      .box {
        background: #fff;
        padding: 1.8rem 2rem;
        border-radius: 18px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
        margin-bottom: 1rem;
      }
      .ticket {
        border-radius: 14px;
        border: 2px dashed #e0d7c8;
        padding: 1.5rem 1.6rem;
        margin-top: 1rem;
        text-align: left;
        position: relative;
      }
      .ticket::before,
      .ticket::after {
        content: "";
        position: absolute;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background: #faf7f2;
        top: 50%;
        transform: translateY(-50%);
      }
      .ticket::before {
        left: -9px;
      }
      .ticket::after {
        right: -9px;
      }
      .ticket-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.7rem;
      }
      .ticket-brand {
        font-weight: 700;
        font-size: 1.1rem;
        color: #b9814a;
      }
      .ticket-sub {
        font-size: 0.75rem;
        color: #777;
      }
      .ticket-code {
        font-size: 0.8rem;
        color: #555;
      }
      .badge-secure {
        display: inline-flex;
        align-items: center;
        gap: 0.3rem;
        font-size: 0.75rem;
        color: #0a8a4a;
        background: #e4f8ee;
        padding: 0.2rem 0.6rem;
        border-radius: 999px;
        margin-top: 0.25rem;
      }
      .ticket-section {
        margin-top: 0.7rem;
        border-top: 1px solid #eee;
        padding-top: 0.7rem;
      }
      .ticket-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.35rem;
        font-size: 0.86rem;
      }
      .ticket-label {
        color: #777;
      }
      .ticket-value {
        font-weight: 600;
        color: #444;
      }
      .ticket-note {
        margin-top: 0.6rem;
        font-size: 0.8rem;
        color: #777;
      }
      .qr-area {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 0.9rem;
        gap: 0.8rem;
      }
      .qr-fake-wrap {
        padding: 0.5rem;
        border-radius: 10px;
        background: #f2ebe4;
      }
      .qr-fake {
        width: 80px;
        height: 80px;
        background-image: linear-gradient(45deg, #222 25%, transparent 25%),
          linear-gradient(-45deg, #222 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #222 75%),
          linear-gradient(-45deg, transparent 75%, #222 75%);
        background-size: 12px 12px;
        background-position: 0 0, 0 6px, 6px -6px, -6px 0px;
        border-radius: 6px;
      }
      .qr-text {
        font-size: 0.75rem;
        color: #777;
        text-align: left;
      }
      .qr-text strong {
        color: #b9814a;
      }
      h1 {
        color: #b9814a;
        margin-bottom: 0.4rem;
        font-size: 1.4rem;
      }
      h2 {
        font-size: 1rem;
        margin-bottom: 0.2rem;
      }
      p {
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
      }
      strong {
        color: #b9814a;
      }
      .actions {
        display: flex;
        justify-content: center;
        gap: 0.5rem;
        flex-wrap: wrap;
        margin-top: 0.8rem;
      }
      .btn-main,
      .btn-secondary {
        padding: 0.6rem 1.4rem;
        border-radius: 999px;
        border: none;
        font-size: 0.9rem;
        cursor: pointer;
        text-decoration: none;
        display: inline-block;
      }
      .btn-main {
        background-color: #b9814a;
        color: #fff;
      }
      .btn-secondary {
        background-color: transparent;
        color: #b9814a;
        border: 1px solid #b9814a;
      }
      .small-line {
        font-size: 0.78rem;
        color: #777;
        margin-top: 0.4rem;
      }

      @media print {
        body {
          background: #fff;
        }
        .actions {
          display: none;
        }
        .small-line {
          display: none;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <div class="box">
        <h1>Table Reserved!</h1>
        <p>
          Hi <strong id="cust-name">Guest</strong>, your reservation has been
          confirmed at Coffee Home.
        </p>

        <div class="ticket">
          <div class="ticket-header">
            <div>
              <div class="ticket-brand">Coffee Home</div>
              <div class="ticket-sub">Hyderabad Â· South Indian Coffee & Chai</div>
              <div class="ticket-code" id="code-line">Code: â€”</div>
              <div class="badge-secure">
                ðŸ”’ <span>Verified Reservation</span>
              </div>
            </div>
          </div>

          <div class="ticket-section">
            <div class="ticket-row">
              <span class="ticket-label">Name</span>
              <span class="ticket-value" id="t-name">â€”</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label">Table</span>
              <span class="ticket-value" id="t-table">â€”</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label">Guests</span>
              <span class="ticket-value" id="t-guests">â€”</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label">Date</span>
              <span class="ticket-value" id="t-date">â€”</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label">Time</span>
              <span class="ticket-value" id="t-time">â€”</span>
            </div>
            <div class="ticket-row">
              <span class="ticket-label">Contact</span>
              <span class="ticket-value" id="t-phone">â€”</span>
            </div>
          </div>

          <div class="ticket-section">
            <div class="qr-area">
              <div class="qr-fake-wrap">
                <div class="qr-fake"></div>
              </div>
              <div class="qr-text">
                <strong>Table QR (Demo)</strong>
                <br />
                Show this ticket at the counter.
                <br />
                This QR is for design only in this project ðŸ˜Š
              </div>
            </div>
            <p class="ticket-note">
              Please reach 5â€“10 minutes before your reserved time. Your table
              will be held for a short grace period.
            </p>
          </div>
        </div>

        <p id="phone-line" class="small-line"></p>
      </div>

      <div class="actions">
        <button id="download-btn" class="btn-main">Download Receipt</button>
        <a href="index.html" class="btn-secondary">Back to Home</a>
      </div>

      <p class="small-line">
        Tip: You can show this reservation ticket at the cafÃ© or keep it saved
        as a PDF.
      </p>
    </div>

    <script>
      const params = new URLSearchParams(window.location.search);

      const name = params.get("name") || "Guest";
      const table = params.get("table") || "-";
      const phone = params.get("phone") || "";
      const guests = params.get("guests") || "-";
      const date = params.get("date") || "-";
      const time = params.get("time") || "-";
      const code = params.get("code") || "CH-R" + Math.floor(100000 + Math.random() * 900000);

      function formatDate(value) {
        if (!value || value === "-") return "-";
        const d = new Date(value);
        if (isNaN(d.getTime())) return value;
        return d.toLocaleDateString("en-IN", {
          day: "2-digit",
          month: "short",
          year: "numeric"
        });
      }

      function formatTime(value) {
        if (!value || value === "-") return "-";
        const parts = value.split(":");
        if (parts.length < 2) return value;
        let h = parseInt(parts[0], 10);
        const m = parts[1];
        if (isNaN(h)) return value;
        let suffix = "AM";
        if (h === 0) h = 12;
        else if (h >= 12) {
          suffix = "PM";
          if (h > 12) h -= 12;
        }
        return `${h}:${m} ${suffix}`;
      }

      document.getElementById("cust-name").textContent = name;

      document.getElementById("t-name").textContent = name;
      document.getElementById("t-table").textContent = table;
      document.getElementById("t-guests").textContent = guests;
      document.getElementById("t-date").textContent = formatDate(date);
      document.getElementById("t-time").textContent = formatTime(time);
      document.getElementById("t-phone").textContent = phone || "â€”";
      document.getElementById("code-line").textContent = "Code: " + code;

      if (phone) {
        document.getElementById("phone-line").textContent =
          "A confirmation will be sent to " + phone + ".";
      }

      document.getElementById("download-btn").addEventListener("click", () => {
        window.print();
      });
    </script>
  </body>
</html>
